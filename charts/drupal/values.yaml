global:
  storageClass: "azurefile-premium"
  project: "drupal"
  environment: "production"

imagePullPolicy: "Always"
imagePullSecret: "drupal-acr-cred"
drupalImage: "drupalcr.azurecr.io/brainsum/drupal-app:latest"
nginxImage: "drupalcr.azurecr.io/brainsum/drupal-nginx:latest"

ingress:
  host: "mysite.com"
  tlsSecret: "mysite-tls-secret"
  sslRedirect: false

# This is useful for disallowing robots access for e.g. a dev site.
robotsOverride:
  enable: true
  existingConfig: ""

appDatabaseHost: "drupal-database-mariadb.drupal.svc.cluster.local"

appStorage:
  class: "drupal-storage"
  size: "5Gi"

backupStorage:
  class: "drupal-storage"
  size: "5Gi"

gracefulUpdate:
  preStopTimeout: 60
  terminationGracePeriodSeconds: 70
  connectionDrainTimeout: 30

rollback:
  backupVersion: "latest"

drupalSettingsDir: "/var/www/html/settings"
drupalExtraEnvVars: []
drupalExtraSettings:
  volumes:
    - name: email-settings
      secret:
        secretName: drupal-production-app-settings
        items:
          - key: settings.email.php
            path: settings.email.php
  mounts:
    - name: email-settings
      mountPath: /var/www/html/settings/settings.email.php
      subPath: settings.email.php
      readOnly: true

trustedHosts:
  enable: false
  existingConfig: ""
  # @note: Additional hosts only works if existingConfig is not set.
  additionalHosts:
    - 'localhost'
    - 'drupal.docker.localhost'

solr:
  enable: false
  # When existingConfig is used, host and core are ignored.
  existingConfig: ""
  host: "solr-solrcloud-headless.drupal.svc.cluster.local"
  core: "dislaw-solr-collection"

  # When existingSecret is used, username and password are ignored.
  authenticate: false
  existingSecret: ""
  username: ""
  password: ""

# @todo: Add to templates + env.
# @todo: Use configmap/secret instead vs allow using custom ones.
redis:
  enable: false
  # When existingConfig is used, host is ignored.
  existingConfig: ""
  host: "drupal-cache-redis-master.drupal.svc.cluster.local"

  # When existingSecret is used, password is ignored.
  authenticate: false
  existingSecret: ""
  password: ""
